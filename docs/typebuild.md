## Типы сборок { #build-type }

По умолчанию код в Аркадии собирается в конфигурации *Debug* — без оптимизаций, с отладочной информацией и ассёртами.
Для типов сборок доступны следующие варианты:

- `-d`, `--debug`, `--build debug` (по умолчанию) - сборка без оптимизаций (для C++ уровень оптимизаций `-O0`), с отладочной информацией и ассёртами. Для С++ добавляет `-fstack-protector`.
- `-r`, `--release`, `--build release` - Сборка *Release* — с оптимизациями (для C++ уровень оптимизаций `-O3`). Для кода на C++ она включает отладочную информацию.
- `--build relwithdebinfo` - Релизная сборка с включенными ассёртами для C++. Используется для основных проверок в CI поскольку debug слишком медленно, а ассёрты дают больше полезной информации.
- `--build minsizerel` - Сборка с оптимизацией по размеру бинарного кода (для C++ уровень оптимизаций `-Oz` или `-Os` в зависимости от компилятора)
- `--build debugnoasserts` - Сборка без оптимизаций, но с выключенными ассёртами.
- `--build fastdebug` - Более производительная отладочная сборка, включает некоторые оптимизации (для C++ уровень оптимизаций `-Og`).
- `--build profile` - Релизная сборка, упрощающая профилировку — для C++ добавляет `-fno-omit-frame-pointer`.
- `--build valgrind`/`--build valgrind-release` - Инструментированная сборка для профилирования памяти с помощью valgrind.
- `--build coverage` - Сборка с инструментированием для подсчёта покрытия кода.


{% note tip %}

Полный актуальный список вариантов сборки можно посмотреть, выполнив `ya make --help | grep 'Build type'` или `ya make --build help`.

{% endnote %}

Кроме параметра `--build` есть ещё ряд флагов, влияющих на тип сборки:

- `--lto`/`--thinlto` - сборка с глобальными оптимизациями (оптимизациями во время линковки, LTO) для C++;
- `--sanitize <sanitizer>` - сборка с санитайзером для С++;
- `--race` - сборка с race detector для Go.
- `--hardening` - сборка с более строгими проверками в коде
- `--musl` - сборка C/С++ c MUSL вместо glibc
- `--cuda=<optional|required|disabled>` - сборка с CUDA
